{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %} calculate distance {% endblock title %}

{% block content %} 
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">distance to {{destination}} is :</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                {{distance}} KM. 
            </div>
          </div>
        </div>
     </div> 
    <hr>
    {{map | safe}}
    <form action="" method="POST" autocomplete="off">
        {% csrf_token %}
        {{form | crispy }}
        <button type="submit" class="btn btn-primary">Confirm</button>
    </form>

    This product includes GeoLite2 data created by MaxMind, available from
    <a href="https://www.maxmind.com">https://www.maxmind.com</a>.

    {% if request.POST and distance is not None %} 
        <script>
            $(window).on('load', function() {
                $('#exampleModal').modal('show')
            })

        </script>
    {% endif %}


{% endblock content %}